local keymap = vim.keymap.set

-- ============================================================================
-- ğŸ¤– AI / CodeCompanion
-- ============================================================================

-- æ–°è¦AIãƒãƒ£ãƒƒãƒˆä½œæˆï¼šSpace â†’ a â†’ n
keymap("n", "<leader>an", "<cmd>CodeCompanionChat<cr>", {
  desc = "AI: æ–°è¦ãƒãƒ£ãƒƒãƒˆ (CodeCompanion)",
})

-- CodeCompanion ãƒãƒ£ãƒƒãƒˆå†…ã ã‘é€ä¿¡ã‚­ãƒ¼ã‚’å®šç¾©
vim.api.nvim_create_autocmd("FileType", {
  pattern = "codecompanion",
  callback = function(ev)
    -- Insert / Normal ä¸¡æ–¹ã§é€ä¿¡
    -- <CR> ãŒ CodeCompanion ã®æ­£å¼ãªé€ä¿¡
    keymap({ "i", "n" }, "<C-j>", "<CR>", {
      buffer = ev.buf,
      remap = true,
      desc = "AI: é€ä¿¡",
    })

    -- ãƒãƒ£ãƒƒãƒˆå†…ã§ã¯ <C-s> ã‚‚é€ä¿¡ã«ã™ã‚‹ï¼ˆä¿å­˜ã¨è¡çªã—ãªã„ï¼‰
    keymap({ "i", "n" }, "<C-s>", "<CR>", {
      buffer = ev.buf,
      remap = true,
      desc = "AI: é€ä¿¡",
    })
  end,
})

-- ============================================================================
-- ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ä¿å­˜
-- ============================================================================

-- ä¿å­˜ï¼ˆãƒãƒ£ãƒƒãƒˆä»¥å¤–ï¼‰
keymap({ "n", "i", "v" }, "<C-s>", "<cmd>w<cr><esc>", { desc = "ä¿å­˜" })

-- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼
keymap("n", "<leader>e", "<cmd>Neotree toggle<cr>", {
  desc = "ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼è¡¨ç¤º",
})

-- ============================================================================
-- ğŸªŸ ç”»é¢åˆ†å‰²ãƒ»ç§»å‹•
-- ============================================================================

-- åˆ†å‰²
keymap("n", "<leader>|", "<cmd>vsplit<cr>", { desc = "å·¦å³åˆ†å‰²" })
keymap("n", "<leader>-", "<cmd>split<cr>", { desc = "ä¸Šä¸‹åˆ†å‰²" })

-- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•
keymap("n", "<C-h>", "<C-w>h", { desc = "å·¦ã¸ç§»å‹•" })
keymap("n", "<C-j>", "<C-w>j", { desc = "ä¸‹ã¸ç§»å‹•" })
keymap("n", "<C-k>", "<C-w>k", { desc = "ä¸Šã¸ç§»å‹•" })
keymap("n", "<C-l>", "<C-w>l", { desc = "å³ã¸ç§»å‹•" })
